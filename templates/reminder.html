{% extends 'base.html' %}
{% block title %}Set Reminder{% endblock title %}

{% block body %}
<div class="container my-4">
  <h2 class="mb-4">Set a Reminder</h2>
  <form id="reminderForm">
    <div class="mb-3">
      <label for="task" class="form-label">Task</label>
      <input type="text" class="form-control" id="task" required>
    </div>
    <div class="mb-3">
      <label for="description" class="form-label">Task Description</label>
      <textarea class="form-control" id="description" rows="3" required></textarea>
    </div>
    <div class="mb-3">
      <label for="date" class="form-label">Date</label>
      <input type="date" class="form-control" id="date" required>
    </div>
    <div class="mb-3">
      <label for="time" class="form-label">Time</label>
      <input type="time" class="form-control" id="time" required>
    </div>
    <button type="submit" class="btn btn-primary">Set Reminder</button>
  </form>
</div>

<script>
  console.log("âœ… JavaScript is running!");

  document.addEventListener("DOMContentLoaded", function () {
    // Reminder form handling
    const form = document.getElementById('reminderForm');
    if (form) {
      form.addEventListener('submit', function (e) {
        e.preventDefault();

        const task = document.getElementById('task').value;
        const desc = document.getElementById('description').value;
        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;

        const targetTime = new Date(`${date}T${time}`);
        const now = new Date();
        const diff = targetTime - now;

        if (diff <= 0) {
          alert("Reminder time must be in the future!");
          return;
        }

        alert("Reminder is set!");

        setTimeout(() => {
          alert(`ðŸ”” Reminder!\n\nTask: ${task}\nDescription: ${desc}`);
        }, diff);
      });
    }
  });
</script>
{% endblock body %}